# ç¥ç»æ¢¦å¢ƒå®éªŒå®¤ - æœ¬åœ°å®‰è£…è¿è¡ŒæŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

ç¥ç»æ¢¦å¢ƒå®éªŒå®¤æ˜¯ä¸€ä¸ªé›†æˆäº†3Då¯è§†åŒ–ã€ç”¨æˆ·è®¤è¯ã€å®éªŒç®¡ç†å’ŒAIæ™ºèƒ½ä½“çš„ç»¼åˆæ€§ç§‘ç ”å¹³å°ã€‚

### ğŸ¯ ä¸»è¦åŠŸèƒ½
- **ç¥ç»æ˜ å°„3Då¯è§†åŒ–** - å®æ—¶3Då¤§è„‘ç¥ç»ç½‘ç»œå±•ç¤º
- **3Då°é¼ æ•°å­—å­ªç”Ÿ** - åŸºäºç‰©ç†å¼•æ“çš„å®Œæ•´ç”Ÿç†æ¨¡å‹
- **å®éªŒç®¡ç†ç³»ç»Ÿ** - æ”¯æŒ5ç§å®éªŒç±»å‹çš„å®Œæ•´ç®¡ç†
- **AIæ™ºèƒ½æ²™é¾™** - 4ä¸ªä¸“ä¸šæ™ºèƒ½ä½“åä½œå¯¹è¯
- **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - å®Œæ•´çš„æ³¨å†Œç™»å½•æƒé™ç®¡ç†

### ğŸ› ï¸ æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 18 + TypeScript + Vite
- **3Dæ¸²æŸ“**: Three.js + @react-three/fiber
- **åç«¯**: Supabase (æ•°æ®åº“ + è®¤è¯ + Edge Functions)
- **æ ·å¼**: TailwindCSS + Radix UI
- **çŠ¶æ€ç®¡ç†**: Zustand + React Query

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Node.js**: >= 18.0.0
- **åŒ…ç®¡ç†å™¨**: pnpm (æ¨è) æˆ– npm
- **æµè§ˆå™¨**: Chrome 90+, Firefox 88+, Edge 90+, Safari 14+
- **ç¡¬ä»¶**: æ”¯æŒWebGL 2.0çš„æ˜¾å¡

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
# è§£å‹é¡¹ç›®æ–‡ä»¶åˆ°æœ¬åœ°ç›®å½•
cd neuroscience-dream-lab-local
```

#### 2. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼š
```env
# Supabase é…ç½®
VITE_SUPABASE_URL=ä½ çš„_supabase_é¡¹ç›®_url
VITE_SUPABASE_ANON_KEY=ä½ çš„_supabase_åŒ¿åå¯†é’¥

# MiniMax AI é…ç½® (å¯é€‰ï¼Œç”¨äºAIæ²™é¾™åŠŸèƒ½)
VITE_MINIMAX_API_KEY=ä½ çš„_minimax_api_key
VITE_MINIMAX_GROUP_ID=ä½ çš„_group_id

# å¼€å‘æ¨¡å¼é…ç½®
VITE_DEV_MODE=true
```

#### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
# ä½¿ç”¨ pnpm
pnpm dev

# æˆ–ä½¿ç”¨ npm
npm run dev

# æˆ–ä½¿ç”¨ yarn
yarn dev
```

#### 5. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
neuroscience-dream-lab-local/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AISalon/        # AIæ²™é¾™ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DigitalTwin/    # æ•°å­—å­ªç”Ÿç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Experiments/    # å®éªŒç®¡ç†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/           # Reactä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ lib/                # å·¥å…·åº“
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ services/           # APIæœåŠ¡
â”‚   â”œâ”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ supabase/               # Supabaseé…ç½®
â”‚   â”œâ”€â”€ functions/         # Edge Functions
â”‚   â”œâ”€â”€ migrations/        # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ schema.sql         # æ•°æ®åº“æ¶æ„
â”œâ”€â”€ public/                # é™æ€èµ„æº
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts         # Viteé…ç½®
â”œâ”€â”€ tailwind.config.js     # TailwindCSSé…ç½®
â””â”€â”€ tsconfig.json          # TypeScripté…ç½®
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### Supabaseé…ç½®

1. **åˆ›å»ºSupabaseé¡¹ç›®**
   - è®¿é—® [supabase.com](https://supabase.com)
   - åˆ›å»ºæ–°é¡¹ç›®
   - è·å–é¡¹ç›®URLå’ŒAPIå¯†é’¥

2. **è®¾ç½®æ•°æ®åº“**
   ```sql
   -- åœ¨Supabase SQLç¼–è¾‘å™¨ä¸­æ‰§è¡Œ
   -- å‚è€ƒ supabase/schema.sql æ–‡ä»¶
   ```

3. **é…ç½®è®¤è¯**
   - åœ¨Supabaseæ§åˆ¶å°å¯ç”¨Emailè®¤è¯
   - é…ç½®é‡å®šå‘URL

### MiniMax AIé…ç½® (å¯é€‰)

1. **è·å–APIå¯†é’¥**
   - è®¿é—®MiniMaxå¼€æ”¾å¹³å°
   - åˆ›å»ºåº”ç”¨å¹¶è·å–APIå¯†é’¥

2. **é…ç½®Edge Function**
   ```bash
   # éƒ¨ç½²AIæ²™é¾™åŠŸèƒ½
   supabase functions deploy ai-salon-chat
   ```

---

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### 1. ç¥ç»æ˜ å°„3Då¯è§†åŒ–
- **æ–‡ä»¶**: `src/pages/DreamLab/NeuralMapping.tsx`
- **åŠŸèƒ½**: 13ä¸ªè„‘åŒºèŠ‚ç‚¹ï¼Œ20+ç¥ç»è¿æ¥åŠ¨æ€å±•ç¤º
- **æŠ€æœ¯**: Three.js + @react-three/fiber

### 2. 3Då°é¼ æ•°å­—å­ªç”Ÿ
- **æ–‡ä»¶**: `src/components/DigitalTwin/MouseModel3D.tsx`
- **åŠŸèƒ½**: å®Œæ•´å°é¼ æ¨¡å‹ï¼Œç‰©ç†å¼•æ“ä»¿çœŸ
- **æŠ€æœ¯**: Cannon.js + @react-three/cannon

### 3. å®éªŒç®¡ç†ç³»ç»Ÿ
- **æ–‡ä»¶**: `src/pages/Experiments/index.tsx`
- **åŠŸèƒ½**: 5ç§å®éªŒç±»å‹æ”¯æŒ
- **æŠ€æœ¯**: React Hook Form + ZodéªŒè¯

### 4. AIæ™ºèƒ½æ²™é¾™
- **æ–‡ä»¶**: `src/pages/AISalon/index.tsx`
- **åŠŸèƒ½**: 4ä¸ªä¸“ä¸šæ™ºèƒ½ä½“åä½œ
- **æŠ€æœ¯**: MiniMax API + WebSocket

### 5. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- **æ–‡ä»¶**: `src/contexts/AuthContext.tsx`
- **åŠŸèƒ½**: æ³¨å†Œç™»å½•ï¼Œæƒé™ç®¡ç†
- **æŠ€æœ¯**: Supabase Auth

---

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

### å¸¸ç”¨å‘½ä»¤
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm type-check

# æ¸…ç†ä¾èµ–
pnpm clean
```

### Supabaseå‘½ä»¤
```bash
# å¯åŠ¨æœ¬åœ°Supabase
supabase start

# éƒ¨ç½²Edge Functions
supabase functions deploy

# æŸ¥çœ‹æ—¥å¿—
supabase functions logs

# é‡ç½®æ•°æ®åº“
supabase db reset
```

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

#### 2. ç«¯å£å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :5173

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 3. WebGLæ”¯æŒæ£€æŸ¥
```javascript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œ
console.log(WebGLRenderingContext);
```

#### 4. TypeScripté”™è¯¯
```bash
# é‡æ–°ç”Ÿæˆç±»å‹
pnpm type-check --noEmit
```

#### 5. Supabaseè¿æ¥é—®é¢˜
- æ£€æŸ¥ `.env.local` é…ç½®
- ç¡®è®¤ç½‘ç»œè¿æ¥
- éªŒè¯APIå¯†é’¥æœ‰æ•ˆæ€§

### è°ƒè¯•æŠ€å·§

#### 1. æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- æ‰“å¼€F12å¼€å‘è€…å·¥å…·
- æŸ¥çœ‹Consoleã€Networkã€Performanceæ ‡ç­¾
- æ£€æŸ¥WebGLæ”¯æŒæƒ…å†µ

#### 2. React DevTools
- å®‰è£…React Developer Toolsæ‰©å±•
- æŸ¥çœ‹ç»„ä»¶æ ‘å’ŒçŠ¶æ€
- åˆ†ææ€§èƒ½ç“¶é¢ˆ

#### 3. ç½‘ç»œè°ƒè¯•
- æ£€æŸ¥APIè¯·æ±‚çŠ¶æ€
- æŸ¥çœ‹å“åº”æ•°æ®æ ¼å¼
- éªŒè¯è®¤è¯ä»¤ç‰Œ

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: ä½¿ç”¨React.lazyæ‡’åŠ è½½
- **èµ„æºå‹ç¼©**: Viteè‡ªåŠ¨ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: é…ç½®æµè§ˆå™¨ç¼“å­˜

### è¿è¡Œæ—¶ä¼˜åŒ–
- **3Dæ¸²æŸ“**: ä½¿ç”¨requestAnimationFrame
- **çŠ¶æ€ç®¡ç†**: é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- **å†…å­˜ç®¡ç†**: åŠæ—¶æ¸…ç†3Dèµ„æº

### æ€§èƒ½ç›‘æ§
```javascript
// åœ¨å¼€å‘æ¨¡å¼å¯ç”¨æ€§èƒ½ç›‘æ§
if (import.meta.env.DEV) {
  import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
    getCLS(console.log);
    getFID(console.log);
    getFCP(console.log);
    getLCP(console.log);
    getTTFB(console.log);
  });
}
```

---

## ğŸ” å®‰å…¨é…ç½®

### ç¯å¢ƒå˜é‡å®‰å…¨
- æ•æ„Ÿä¿¡æ¯ä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
- ä½¿ç”¨ `.env.local` æœ¬åœ°é…ç½®æ–‡ä»¶
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†

### è®¤è¯å®‰å…¨
- å¯ç”¨Supabase RLSç­–ç•¥
- é…ç½®CORSç­–ç•¥
- ä½¿ç”¨HTTPSéƒ¨ç½²

### æ•°æ®å®‰å…¨
- å®šæœŸå¤‡ä»½æ•°æ®åº“
- ç›‘æ§å¼‚å¸¸è®¿é—®
- å®æ–½è®¿é—®æ§åˆ¶

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# æ„å»ºç»“æœåœ¨ dist/ ç›®å½•
ls dist/
```

### éƒ¨ç½²é€‰é¡¹

#### 1. Verceléƒ¨ç½²
```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

#### 2. Netlifyéƒ¨ç½²
```bash
# å®‰è£…Netlify CLI
npm i -g netlify-cli

# éƒ¨ç½²
netlify deploy --prod --dir=dist
```

#### 3. è‡ªå®šä¹‰æœåŠ¡å™¨
```bash
# ä½¿ç”¨nginx
sudo cp -r dist/* /var/www/html/

# ä½¿ç”¨Apache
sudo cp -r dist/* /var/www/html/
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### æŠ€æœ¯æ–‡æ¡£
- [Reactå®˜æ–¹æ–‡æ¡£](https://react.dev)
- [TypeScriptæ–‡æ¡£](https://www.typescriptlang.org)
- [Viteæ–‡æ¡£](https://vitejs.dev)
- [Three.jsæ–‡æ¡£](https://threejs.org)
- [Supabaseæ–‡æ¡£](https://supabase.com/docs)

### æœ€ä½³å®è·µ
- [Reactæœ€ä½³å®è·µ](https://react.dev/learn/thinking-in-react)
- [TypeScriptæœ€ä½³å®è·µ](https://typescript-eslint.io/rules/)
- [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](https://web.dev/performance/)

### ç¤¾åŒºèµ„æº
- [Reactä¸­æ–‡ç¤¾åŒº](https://react.docschina.org)
- [TypeScriptä¸­æ–‡æ–‡æ¡£](https://www.tslang.cn)
- [Three.jsä¸­æ–‡ç¤¾åŒº](https://threejs.org.cn)

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
1. æŸ¥çœ‹æœ¬æŒ‡å—çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®GitHub Issues
3. å‚è€ƒå®˜æ–¹æ–‡æ¡£
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

### æŠ¥å‘Šé—®é¢˜
è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
- æ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨ç‰ˆæœ¬
- é”™è¯¯ä¿¡æ¯å’Œæˆªå›¾
- é‡ç°æ­¥éª¤
- æœŸæœ›çš„è¡Œä¸º

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-31)
- âœ… å®Œæ•´çš„React + TypeScripté¡¹ç›®ç»“æ„
- âœ… ç¥ç»æ˜ å°„3Då¯è§†åŒ–åŠŸèƒ½
- âœ… 3Då°é¼ æ•°å­—å­ªç”Ÿç³»ç»Ÿ
- âœ… å®éªŒç®¡ç†ç³»ç»Ÿ
- âœ… AIæ™ºèƒ½æ²™é¾™åŠŸèƒ½
- âœ… ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… å®Œæ•´çš„æœ¬åœ°å¼€å‘ç¯å¢ƒ

---

*æœ€åæ›´æ–°: 2025-10-31*  
*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*ä½œè€…: MiniMax Agent*