# 神经梦境实验室 - 项目结构说明

## 📁 完整项目结构

```
neuroscience-dream-lab-local/
├── 📄 README.md                    # 项目说明文档
├── 📄 本地安装运行指南.md            # 详细安装指南
├── 📄 故障排除快速指南.md            # 快速故障排除
├── 📄 项目结构说明.md               # 本文件
├── 📄 .env.example                 # 环境变量模板
├── 📄 .env.local                   # 环境变量配置 (需要创建)
├── 📄 package.json                 # 项目依赖配置
├── 📄 pnpm-lock.yaml               # pnpm锁定文件
├── 📄 vite.config.ts               # Vite构建配置
├── 📄 tailwind.config.js           # TailwindCSS配置
├── 📄 tsconfig.json                # TypeScript配置
├── 📄 tsconfig.app.json            # 应用TypeScript配置
├── 📄 tsconfig.node.json           # Node.js TypeScript配置
├── 📄 eslint.config.js             # ESLint代码检查配置
├── 📄 postcss.config.js            # PostCSS配置
├── 📄 components.json              # 组件库配置
├── 📄 index.html                   # HTML入口文件
├── 🚀 start.sh                     # Linux/macOS启动脚本
├── 🚀 start.bat                    # Windows启动脚本
│
├── 📁 src/                         # 源代码目录
│   ├── 📄 App.tsx                  # 主应用组件
│   ├── 📄 App.css                  # 应用样式
│   ├── 📄 main.tsx                 # 应用入口文件
│   ├── 📄 index.css                # 全局样式
│   │
│   ├── 📁 components/              # React组件
│   │   ├── 📁 AISalon/             # AI沙龙组件
│   │   │   ├── 📄 ChatInterface.tsx # 聊天界面
│   │   │   └── 📄 index.ts         # 组件导出
│   │   │
│   │   ├── 📁 DigitalTwin/         # 数字孪生组件
│   │   │   ├── 📄 MouseModel3D.tsx  # 3D小鼠模型
│   │   │   ├── 📄 NeuralActivity.tsx # 神经活动可视化
│   │   │   └── 📄 index.ts         # 组件导出
│   │   │
│   │   ├── 📁 Experiments/         # 实验管理组件
│   │   │   ├── 📄 CreateExperimentModal.tsx # 创建实验弹窗
│   │   │   └── 📄 index.ts         # 组件导出
│   │   │
│   │   ├── 📁 Layout/              # 布局组件
│   │   │   ├── 📄 Header.tsx       # 页头组件
│   │   │   ├── 📄 MainLayout.tsx   # 主布局组件
│   │   │   ├── 📄 Sidebar.tsx      # 侧边栏组件
│   │   │   └── 📄 index.ts         # 组件导出
│   │   │
│   │   ├── 📁 DreamLab/            # 梦境实验室组件
│   │   │   ├── 📄 NeuralMapping.tsx # 神经映射组件
│   │   │   └── 📄 index.ts         # 组件导出
│   │   │
│   │   ├── 📄 ErrorBoundary.tsx    # 错误边界组件
│   │   └── 📄 index.ts             # 组件导出
│   │
│   ├── 📁 contexts/                # React上下文
│   │   ├── 📄 AuthContext.tsx      # 认证上下文
│   │   └── 📄 index.ts             # 上下文导出
│   │
│   ├── 📁 hooks/                   # 自定义Hooks
│   │   ├── 📄 use-mobile.tsx       # 移动端检测Hook
│   │   └── 📄 index.ts             # Hooks导出
│   │
│   ├── 📁 lib/                     # 工具库
│   │   ├── 📄 supabase.ts          # Supabase客户端
│   │   ├── 📄 utils.ts             # 工具函数
│   │   └── 📄 index.ts             # 库导出
│   │
│   ├── 📁 pages/                   # 页面组件
│   │   ├── 📁 AISalon/             # AI沙龙页面
│   │   │   └── 📄 index.tsx        # 页面组件
│   │   │
│   │   ├── 📁 Admin/               # 管理页面
│   │   │   └── 📄 index.tsx        # 页面组件
│   │   │
│   │   ├── 📁 Dashboard/           # 仪表板页面
│   │   │   └── 📄 index.tsx        # 页面组件
│   │   │
│   │   ├── 📁 DigitalTwin/         # 数字孪生页面
│   │   │   └── 📄 index.tsx        # 页面组件
│   │   │
│   │   ├── 📁 DreamLab/            # 梦境实验室页面
│   │   │   ├── 📄 index.tsx        # 页面组件
│   │   │   └── 📄 NeuralMapping.tsx # 神经映射页面
│   │   │
│   │   ├── 📁 Experiments/         # 实验管理页面
│   │   │   ├── 📄 index.tsx        # 实验列表页面
│   │   │   └── 📄 CreateExperiment.tsx # 创建实验页面
│   │   │
│   │   ├── 📁 Login/               # 登录页面
│   │   │   └── 📄 index.tsx        # 页面组件
│   │   │
│   │   └── 📁 index.ts             # 页面导出
│   │
│   ├── 📁 services/                # API服务
│   │   ├── 📄 aiSalonService.ts    # AI沙龙服务
│   │   ├── 📄 experimentService.ts # 实验服务
│   │   ├── 📄 authService.ts       # 认证服务
│   │   └── 📄 index.ts             # 服务导出
│   │
│   ├── 📁 store/                   # 状态管理
│   │   ├── 📄 authStore.ts         # 认证状态
│   │   ├── 📄 experimentStore.ts   # 实验状态
│   │   ├── 📄 aiSalonStore.ts      # AI沙龙状态
│   │   └── 📄 index.ts             # 状态导出
│   │
│   ├── 📁 types/                   # TypeScript类型定义
│   │   ├── 📄 auth.ts              # 认证相关类型
│   │   ├── 📄 experiment.ts        # 实验相关类型
│   │   ├── 📄 aiSalon.ts           # AI沙龙相关类型
│   │   ├── 📄 neural.ts            # 神经映射相关类型
│   │   └── 📄 index.ts             # 类型导出
│   │
│   └── 📁 utils/                   # 工具函数
│       ├── 📄 constants.ts         # 常量定义
│       ├── 📄 helpers.ts           # 辅助函数
│       ├── 📄 validation.ts        # 验证函数
│       └── 📄 index.ts             # 工具导出
│
├── 📁 supabase/                    # Supabase配置
│   ├── 📁 functions/               # Edge Functions
│   │   ├── 📁 ai-salon-chat/       # AI沙龙聊天功能
│   │   │   ├── 📄 index.ts         # 函数入口
│   │   │   └── 📄 deno.json        # Deno配置
│   │   │
│   │   └── 📁 neural-analysis/     # 神经分析功能
│   │       ├── 📄 index.ts         # 函数入口
│   │       └── 📄 deno.json        # Deno配置
│   │
│   ├── 📁 migrations/              # 数据库迁移
│   │   ├── 📄 001_initial_schema.sql # 初始架构
│   │   ├── 📄 002_user_profiles.sql  # 用户配置
│   │   └── 📄 003_experiments.sql    # 实验表
│   │
│   └── 📄 schema.sql               # 完整数据库架构
│
├── 📁 public/                      # 静态资源
│   ├── 📄 favicon.ico              # 网站图标
│   ├── 📄 robots.txt               # 搜索引擎配置
│   └── 📁 assets/                  # 静态资源
│       ├── 📁 images/              # 图片资源
│       ├── 📁 models/              # 3D模型文件
│       └── 📁 data/                # 数据文件
│
└── 📁 docs/                        # 项目文档
    ├── 📄 API.md                   # API文档
    ├── 📄 DEPLOYMENT.md            # 部署文档
    └── 📄 DEVELOPMENT.md           # 开发文档
```

## 🎯 核心文件说明

### 配置文件
- **package.json** - 项目依赖和脚本配置
- **vite.config.ts** - Vite构建工具配置
- **tailwind.config.js** - TailwindCSS样式配置
- **tsconfig.json** - TypeScript编译配置
- **.env.example** - 环境变量模板

### 源代码文件
- **src/main.tsx** - React应用入口点
- **src/App.tsx** - 主应用组件
- **src/lib/supabase.ts** - Supabase客户端配置

### 核心功能模块
- **神经映射**: `src/pages/DreamLab/NeuralMapping.tsx`
- **3D小鼠**: `src/components/DigitalTwin/MouseModel3D.tsx`
- **实验管理**: `src/pages/Experiments/index.tsx`
- **AI沙龙**: `src/pages/AISalon/index.tsx`
- **用户认证**: `src/contexts/AuthContext.tsx`

### 启动脚本
- **start.sh** - Linux/macOS一键启动
- **start.bat** - Windows一键启动

## 🔧 开发流程

### 1. 环境准备
```bash
# 检查Node.js版本
node --version

# 安装pnpm (推荐)
npm install -g pnpm
```

### 2. 项目初始化
```bash
# 安装依赖
pnpm install

# 配置环境变量
cp .env.example .env.local
# 编辑 .env.local 填入配置
```

### 3. 开发调试
```bash
# 启动开发服务器
pnpm dev

# 代码检查
pnpm lint

# 类型检查
pnpm type-check
```

### 4. 构建部署
```bash
# 构建生产版本
pnpm build

# 预览构建结果
pnpm preview
```

## 📊 技术架构

### 前端架构
- **React 18** - 用户界面框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **TailwindCSS** - 样式框架

### 3D渲染
- **Three.js** - 3D图形库
- **@react-three/fiber** - React Three.js集成
- **@react-three/drei** - Three.js辅助组件
- **@react-three/cannon** - 物理引擎

### 后端服务
- **Supabase** - 后端即服务
- **PostgreSQL** - 数据库
- **Edge Functions** - 服务端逻辑
- **Real-time** - 实时数据

### 状态管理
- **Zustand** - 轻量级状态管理
- **React Query** - 服务端状态
- **React Context** - 全局状态

## 🎨 UI/UX设计

### 设计系统
- **Radix UI** - 无障碍UI组件
- **TailwindCSS** - 原子化CSS
- **Framer Motion** - 动画库
- **Lucide React** - 图标库

### 响应式设计
- **移动端优先** - Mobile-first设计
- **断点系统** - 适配不同屏幕
- **触摸优化** - 移动端交互

## 🔐 安全考虑

### 认证授权
- **Supabase Auth** - 用户认证
- **JWT Token** - 会话管理
- **RLS策略** - 数据安全

### 数据保护
- **环境变量** - 敏感信息保护
- **HTTPS** - 传输加密
- **CORS** - 跨域安全

---

*最后更新: 2025-10-31*  
*版本: v1.0*